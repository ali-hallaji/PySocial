{% load staticfiles %}
{% load socialaccount %}
<!DOCTYPE html>
<html lang="fa-IR" dir="rtl" class="uk-height-1-1">
    <head>
        <title>ثبت نام</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta property="og:site_name" content="PySocial">
        <meta property="og:url" content="http://pysocial.com">
        <meta name="description" content="Create an account into PySocial.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="{% static 'main/css/framework.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'main/css/users/authentication.css' %}">
    </head>
    <body class="uk-height-1-1">
        <div class="uk-vertical-align uk-height-1-1 uk-text-center">
            <div class="uk-vertical-align-middle uk-block uk-text-large">
                <form class="uk-form uk-form-stacked uk-text-right" action="" method="post">
                    {% csrf_token %}
                    <div class="uk-form-row">
                        <label class="uk-form-label">نام کاربری</label>
                        <div class="uk-form-controls">
                            <input class="uk-form-large uk-form-width-large" autocomplete="off" name="username" type="text">
                        </div>
                    </div>
                    <div class="uk-form-row">
                        <label class="uk-form-label">گذرواژه</label>
                        <div class="uk-form-controls">
                            <input class="uk-form-large uk-form-width-large" autocomplete="off" name="password1" type="password">
                        </div>
                    </div>
                    <div class="uk-form-row">
                        <label class="uk-form-label">تکرار گذرواژه</label>
                        <div class="uk-form-controls">
                            <input class="uk-form-large uk-form-width-large" autocomplete="off" name="password2" type="password">
                        </div>
                    </div>
                    <div class="uk-form-row">
                        <label class="uk-form-label">ایمیل</label>
                        <div class="uk-form-controls">
                            <input class="uk-form-large uk-form-width-large" autocomplete="off" name="email" type="email" required="required" placeholder="name@yourdomain.com">
                        </div>
                    </div>
                    <div class="uk-form-row">
                        <label class="uk-form-label">کپچا</label>
                        <div class="uk-form-controls">
                            {{ form.captcha }}
                            <a class="js-captcha-refresh"><i class="uk-icon-refresh"></i></a>
                        </div>
                    </div>
                    <div class="uk-text-center">
                        <button class="uk-button uk-button-primary uk-button-large" type="submit">ثبت نام</button>
                    </div>
                    <p id="tm-user-links">
                        <a href="/users/login/"><i class="uk-icon-circle uk-margin-small-left"></i>در صورتی که ثبت نام کرده اید وارد شوید</a>
                    </p>
                    <div class="tm-social-links uk-margin-large-top">
                        <span>ثبت نام با حساب های:</span>
                        <a href="{% provider_login_url "facebook" %}"><i class="uk-icon-facebook-square"></i></a>
                        <a href="{% provider_login_url "google" %}"><i class="uk-icon-google-plus-square"></i></a>
                        <a href="{% provider_login_url "linkedin" %}"><i class="uk-icon-linkedin-square"></i></a>
                        <a href="{% provider_login_url "github" %}"><i class="uk-icon-github-square"></i></a>
                    </div>

                    {% if duplicate_username %}نام کاربری شما در سیستم موجود می باشد، لطفا نام کاربری دیگری را امتحان نمایید.{% endif %}
                    {% if error and error.errors %}
                        {% for key, value in error.errors.items %}
                            {{ key }}: {{ value}}
                        {% endfor %}
                    {% endif %}
                </form>
            </div>
        </div>

        <!-- jQuery -->
        <script src="{% static 'main/js/jquery-2.2.3.min.js' %}"></script>
        <script>
            $('.js-captcha-refresh').click(function(){
                $form = $(this).parents('form');
                var url = location.protocol + "//" + window.location.hostname + ":" + location.port + "/captcha/refresh/";

                $.getJSON(url, {}, function(json) {
                    $form.find('input[name="captcha_0"]').val(json.key);
                    $('img.captcha').attr('src', json.image_url);
                });

                return false;
            });
        </script>
    </body>
</html>
